$execute as @e[predicate=magick_reborn:is_projectile,distance=..2,nbt=!{inGround:true},nbt=!{Air:0s},nbt=!{Owner: $(target_uuid)}] unless score @s deflectCooldown matches 1.. unless data entity @s {data:{caster_id:$(caster_id)}} run function magick_reborn:spell/cast/shield/deflect_projectile with entity @e[type=item_display,nbt={data:{target_uuid:$(target_uuid)}},tag=shield,distance=..1,sort=nearest,limit=1] data
$execute at @e[nbt={UUID:$(target_uuid)},limit=1,sort=nearest] as @e[predicate=magick_reborn:is_projectile,distance=..2,nbt=!{inGround:true},nbt=!{Air:0s},nbt=!{Owner: $(target_uuid)}] unless score @s deflectCooldown matches 1.. unless data entity @s {data:{caster_id:$(caster_id)}} run function magick_reborn:spell/cast/shield/deflect_projectile with entity @e[type=item_display,nbt={data:{target_uuid:$(target_uuid)}},tag=shield,distance=..1,sort=nearest,limit=1] data

$execute at @e[type=marker,tag=shield_center,nbt={data:{target_uuid:$(target_uuid)}},sort=nearest,limit=1] rotated as @e[type=marker,tag=shield_center,nbt={data:{target_uuid:$(target_uuid)}},sort=nearest,limit=1] positioned ~ ~.6 ~ run tp @s $(position) facing entity @e[nbt={UUID:$(target_uuid)},limit=1,sort=nearest] feet
$execute on passengers run data modify entity @s Rotation set from entity @e[type=armor_stand,distance=..2,sort=nearest,tag=shield_ride,nbt={data:{target_uuid:$(target_uuid)}},limit=1] Rotation